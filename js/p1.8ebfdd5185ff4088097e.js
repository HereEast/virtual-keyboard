(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{d:()=>u});const t=[{code:"Backquote",key:{en:"`",ru:"]"},shift:{en:"~",ru:"["},alt:{en:"`",ru:"]"}},{code:"Digit1",key:{en:"1",ru:"1"},shift:{en:"!",ru:"!"},alt:{en:"¡",ru:"!"}},{code:"Digit2",key:{en:"2",ru:"2"},shift:{en:"@",ru:'"'},alt:{en:"™",ru:"@"}},{code:"Digit3",key:{en:"3",ru:"3"},shift:{en:"#",ru:"№"},alt:{en:"£",ru:"#"}},{code:"Digit4",key:{en:"4",ru:"4"},shift:{en:"$",ru:"%"},alt:{en:"¢",ru:"$"}},{code:"Digit5",key:{en:"5",ru:"5"},shift:{en:"%",ru:":"},alt:{en:"∞",ru:"%"}},{code:"Digit6",key:{en:"6",ru:"6"},shift:{en:"^",ru:","},alt:{en:"§",ru:"^"}},{code:"Digit7",key:{en:"7",ru:"7"},shift:{en:"&",ru:"."},alt:{en:"¶",ru:"&"}},{code:"Digit8",key:{en:"8",ru:"8"},shift:{en:"*",ru:";"},alt:{en:"•",ru:"*"}},{code:"Digit9",key:{en:"9",ru:"9"},shift:{en:"(",ru:"("},alt:{en:"ª",ru:"{"}},{code:"Digit0",key:{en:"0",ru:"0"},shift:{en:")",ru:")"},alt:{en:"º",ru:"}"}},{code:"Minus",key:{en:"-",ru:"-"},shift:{en:"_",ru:"_"},alt:{en:"–",ru:"–"}},{code:"Equal",key:{en:"=",ru:"+"},shift:{en:"+",ru:"+"},alt:{en:"≠",ru:"»"}},{code:"Backspace",key:"Backspace"},{code:"Tab",key:"Tab"},{code:"KeyQ",key:{en:"q",ru:"й"},shift:{en:"Q",ru:"Й"},alt:{en:"œ",ru:"ј"}},{code:"KeyW",key:{en:"w",ru:"ц"},shift:{en:"W",ru:"Ц"},alt:{en:"∑",ru:"џ"}},{code:"KeyE",key:{en:"e",ru:"у"},shift:{en:"E",ru:"У"},alt:{en:"´",ru:"ќ"}},{code:"KeyR",key:{en:"r",ru:"к"},shift:{en:"R",ru:"К"},alt:{en:"®",ru:"®"}},{code:"KeyT",key:{en:"t",ru:"е"},shift:{en:"T",ru:"Е"},alt:{en:"†",ru:"†"}},{code:"KeyY",key:{en:"y",ru:"н"},shift:{en:"Y",ru:"Н"},alt:{en:"¥",ru:"њ"}},{code:"KeyU",key:{en:"u",ru:"г"},shift:{en:"U",ru:"Г"},alt:{en:"¨",ru:"ѓ"}},{code:"KeyI",key:{en:"i",ru:"ш"},shift:{en:"I",ru:"Ш"},alt:{en:"ˆ",ru:"ѕ"}},{code:"KeyO",key:{en:"o",ru:"щ"},shift:{en:"O",ru:"Щ"},alt:{en:"ø",ru:"ў"}},{code:"KeyP",key:{en:"p",ru:"з"},shift:{en:"P",ru:"З"},alt:{en:"π",ru:"‘"}},{code:"BracketLeft",key:{en:"[",ru:"х"},shift:{en:"{",ru:"Х"},alt:{en:"“",ru:"“"}},{code:"BracketRight",key:{en:"]",ru:"х"},shift:{en:"}",ru:"Х"},alt:{en:"‘",ru:"ъ"}},{code:"Backslash",key:{en:"\\",ru:"ё"},shift:{en:"|",ru:"Ё"},alt:{en:"«",ru:"ё"}},{code:"CapsLock",key:"CapsLock"},{code:"KeyA",key:{en:"a",ru:"ф"},shift:{en:"A",ru:"Ф"},alt:{en:"å",ru:"ƒ"}},{code:"KeyS",key:{en:"s",ru:"ы"},shift:{en:"S",ru:"Ы"},alt:{en:"ß",ru:"ы"}},{code:"KeyD",key:{en:"d",ru:"в"},shift:{en:"D",ru:"В"},alt:{en:"∂",ru:"ћ"}},{code:"KeyF",key:{en:"f",ru:"а"},shift:{en:"F",ru:"А"},alt:{en:"ƒ",ru:"÷"}},{code:"KeyG",key:{en:"g",ru:"п"},shift:{en:"G",ru:"П"},alt:{en:"©",ru:"©"}},{code:"KeyH",key:{en:"h",ru:"р"},shift:{en:"H",ru:"Р"},alt:{en:"˙",ru:"₽"}},{code:"KeyJ",key:{en:"j",ru:"о"},shift:{en:"J",ru:"О"},alt:{en:"∆",ru:"°"}},{code:"KeyK",key:{en:"k",ru:"л"},shift:{en:"K",ru:"Л"},alt:{en:"˚",ru:"љ"}},{code:"KeyL",key:{en:"l",ru:"д"},shift:{en:"L",ru:"Д"},alt:{en:"¬",ru:"∆"}},{code:"Semicolon",key:{en:";",ru:"ж"},shift:{en:":",ru:"Ж"},alt:{en:"…",ru:"…"}},{code:"Quote",key:{en:"'",ru:"э"},shift:{en:'"',ru:"Э"},alt:{en:"æ",ru:"э"}},{code:"Enter",key:"Enter"},{code:"ShiftLeft",key:"Shift"},{code:"KeyZ",key:{en:"z",ru:"я"},shift:{en:"Z",ru:"Я"},alt:{en:"",ru:""}},{code:"KeyX",key:{en:"x",ru:"ч"},shift:{en:"X",ru:"Ч"},alt:{en:"≈",ru:"≈"}},{code:"KeyC",key:{en:"c",ru:"с"},shift:{en:"C",ru:"С"},alt:{en:"ç",ru:"≠"}},{code:"KeyV",key:{en:"v",ru:"м"},shift:{en:"V",ru:"М"},alt:{en:"√",ru:"µ"}},{code:"KeyB",key:{en:"b",ru:"и"},shift:{en:"B",ru:"И"},alt:{en:"",ru:""}},{code:"KeyN",key:{en:"n",ru:"т"},shift:{en:"N",ru:"Т"},alt:{en:"˜",ru:"™"}},{code:"KeyM",key:{en:"m",ru:"ь"},shift:{en:"M",ru:"Ь"},alt:{en:"µ",ru:"~"}},{code:"Comma",key:{en:",",ru:"б"},shift:{en:"<",ru:"Б"},alt:{en:"≤",ru:"≤"}},{code:"Period",key:{en:".",ru:"ю"},shift:{en:">",ru:"Ю"},alt:{en:"≥",ru:"≥"}},{code:"Slash",key:{en:"/",ru:"/"},shift:{en:"?",ru:"?"},alt:{en:"÷",ru:"“"}},{code:"ShiftRight",key:"Shift"},{code:"Fn",key:"Fn"},{code:"ControlLeft",key:"Control"},{code:"AltLeft",key:"Alt"},{code:"MetaLeft",key:"Meta"},{code:"Space",key:" "},{code:"MetaRight",key:"Meta"},{code:"AltRight",key:"Alt"},{code:"ArrowLeft",key:"ArrowLeft"},{code:"ArrowUp",key:"ArrowUp"},{code:"ArrowDown",key:"ArrowDown"},{code:"ArrowRight",key:"ArrowRight"}];function n(e){return document.querySelector(`[data-code=${e}]`)}function r(e,t){const n=document.createElement(e);return n.classList.add(t),n}const o={Backspace:"key__delete",Tab:"key__tab",MetaLeft:"key__cmd--left",MetaRight:"key__cmd--right",CapsLock:"key__caps",Enter:["key__return","label--small"],ShiftLeft:["key__shift--left","key__shift"],ShiftRight:["key__shift--right","key__shift"],Space:"key__space",Fn:"key__fn",AltLeft:["key__opt","key__opt--left"],AltRight:["key__opt","key__opt--right"],ControlLeft:"key__ctrl",ArrowLeft:"key__arrow",ArrowUp:"key__arrow",ArrowDown:"key__arrow",ArrowRight:"key__arrow"};function a(e){const t=`[data-code=${e.code}]`,n=document.querySelector(t);"keydown"===e.type&&n.classList.add("key--active"),"keyup"===e.type&&n.classList.remove("key--active")}function c(e,t){let n=e.key[t]?e.key[t]:e.key;return"Enter"===n&&(n="Return"),"Backspace"===n&&(n="Delete"),"CapsLock"===n&&(n="Caps Lock"),"Alt"===n&&(n="Opt"),"Meta"===n&&(n="Cmd"),"Control"===n&&(n="Ctrl"),"ArrowLeft"===n&&(n=""),"ArrowUp"===n&&(n=""),"ArrowDown"===n&&(n=""),"ArrowRight"===n&&(n=""),n}class s{constructor(e){this.lang=e}create(){const e=document.querySelector(".keyboard__container");t.forEach((t=>{const n=c(t,this.lang),a=r("button","key");a.dataset.code=t.code,t.key.en&&(a.dataset.en=t.key.en,a.dataset.ru=t.key.ru),t.shift&&(a.dataset.shiftEn=t.shift.en,a.dataset.shiftRu=t.shift.ru),t.alt&&(a.dataset.altEn=t.alt.en,a.dataset.altRu=t.alt.ru),function(e){const t=e.dataset.code,n=o[t];n&&(Array.isArray(n)?e.classList.add(...n,"label--small"):e.classList.add(n,"label--small"))}(a);const s=r("span","label");s.textContent=n.toUpperCase(),a.append(s),e.append(a)}));const n=function(){const e=document.querySelectorAll(".key__arrow"),t=r("div","arrows"),n=r("div","arrows--middle");return e.forEach((e=>{const r=e.dataset.code;r.includes("Up")||r.includes("Down")?n.append(e):t.append(e)})),t.children[0].after(n),t}();e.append(n)}}const{body:u}=document;let i=localStorage.getItem("currentLang")||"en";!function(){const e=r("div","page"),t=r("main","main"),n=r("div","intro__container"),o=r("div","textarea__container"),a=r("textarea","textarea"),c=r("div","keyboard"),s=r("div","keyboard__container"),i=r("p","description");i.innerHTML="This keyboard was created for Mac OS. <br> To delete prev character use <span>DELETE</span>, to delete next — <span>CTRL + D</span> <br>To switch languages use <span>CTRL + CMD</span>";const d=r("p","note");d.innerHTML='Here is a link to <a target="_blank" href="https://github.com/HereEast/virtual-keyboard/pull/2">Pull Request</a>. Sorry:)',n.append(i),o.append(a),c.append(s),t.append(n,o,c,d),e.append(t),u.prepend(e)}(),function(e){new s(e).create()}(i);const d=document.querySelector(".keyboard"),l=document.querySelector(".textarea");l.focus();const y=Array.from(document.querySelectorAll(".key__shift")),k=Array.from(document.querySelectorAll(".key__opt")),f=n("CapsLock"),p=n("ControlLeft"),h=" ".repeat(4);let _,L=l.value,w=0,g=!1,v=!1,m=!1,A=!1;function S(){const e=function(e){let t;if(e.dataset[i]||(t=""),e.dataset[i]&&(t=e.dataset[i]),v){const n="shift"+i[0].toUpperCase()+i.slice(1);e.dataset[i]&&(t=e.dataset[n])}if(A){const n="alt"+i[0].toUpperCase()+i.slice(1);e.dataset[i]&&(t=e.dataset[n])}return g&&(t=t.toUpperCase()),"Space"===e.dataset.code&&(t=" "),"Tab"===e.dataset.code&&(t=h),"Enter"===e.dataset.code&&(t="\n"),"ArrowLeft"===e.dataset.code&&(t="←"),"ArrowRight"===e.dataset.code&&(t="→"),"ArrowUp"===e.dataset.code&&(t="↑"),"ArrowDown"===e.dataset.code&&(t="↓"),t}(n(_)),t=L.slice(0,w),r=L.slice(w);l.value=t+e+r,L=l.value,M(e.length)}function C(e){e.preventDefault(),g&&f.classList.contains("key--active")?(f.classList.remove("key--active"),g=!1):g||f.classList.contains("key--active")||(f.classList.add("key--active"),g=!0)}function E(e){let t;t=e.target.closest(".key__shift")?e.target.closest(".key__shift"):n(e.code),"mousedown"!==e.type&&"keydown"!==e.type||(t.classList.add("key--active"),v=!0),"mouseup"!==e.type&&"keyup"!==e.type||(t.classList.remove("key--active"),v=!1)}function K(e){let t;t=e.target.closest(".key__opt")?e.target.closest(".key__opt"):n(e.code),"mousedown"!==e.type&&"keydown"!==e.type||(t.classList.add("key--active"),A=!0),"mouseup"!==e.type&&"keyup"!==e.type||(t.classList.remove("key--active"),A=!1)}function b(e){"mousedown"!==e.type&&"keydown"!==e.type||(p.classList.add("key--active"),m=!0),"mouseup"!==e.type&&"keyup"!==e.type||(p.classList.remove("key--active"),m=!1)}function D(){const e=w-1;if(e<0||e>L.length)return;const t=L.slice(0,e),n=L.slice(e+1);l.value=t+n,L=l.value,M(-1)}function R(){const e=w;if(e<0||e>L.length)return;const t=L.slice(0,e),n=L.slice(e+1);l.value=t+n,L=l.value,M(0)}function M(e){l.selectionStart=w+e,l.selectionEnd=l.selectionStart,w=l.selectionStart}window.addEventListener("keydown",(function(e){return e.preventDefault(),_=e.code,l.focus(),"Backspace"===e.code?(D(),void a(e)):("ControlLeft"===e.code&&b(e),m&&"KeyD"===_?(R(),void a(e)):("CapsLock"===e.code&&C(e),"ShiftLeft"!==e.code&&"ShiftRight"!==e.code||E(e),"AltLeft"!==e.code&&"AltRight"!==e.code||K(e),m&&"MetaLeft"===e.code&&function(){"en"===i?i="ru":"ru"===i&&(i="en"),localStorage.setItem("currentLang",i);const e=Array.from(document.querySelectorAll(".label"));t.forEach(((t,n)=>{const r=e[n],o=c(t,i);r.textContent=o.toUpperCase()}))}(),S(),void a(e)))})),window.addEventListener("keyup",(function(e){"ControlLeft"===e.code&&b(e),"CapsLock"===e.code&&C(e),"ShiftLeft"!==e.code&&"ShiftRight"!==e.code||E(e),"AltLeft"!==e.code&&"AltRight"!==e.code||K(e),a(e)})),d.addEventListener("click",(function(e){const t=e.target.closest("button");t&&(_=t.dataset.code,l.focus(),"Backspace"!==_?m&&"KeyD"===_?R():("CapsLock"===t.dataset.code&&C(e),S()):D())})),l.addEventListener("click",(function(){w=l.selectionStart,l.selectionStart=w})),y.forEach((e=>{e.addEventListener("mousedown",E),e.addEventListener("mouseup",E)})),k.forEach((e=>{e.addEventListener("mousedown",K),e.addEventListener("mouseup",K)})),p.addEventListener("mousedown",b),p.addEventListener("mouseup",b)})();